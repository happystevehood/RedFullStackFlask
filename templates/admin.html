{% extends "base.html" %}

{% block title %}Admin | Redline Fitness Games{% endblock %}

{% block content %}

<div class="container my-5">

    {% with messages = get_flashed_messages() %}
    {% if messages %}
        <div class="alert alert-info mt-3">
            {{ messages[0] }}
        </div>
    {% endif %}
    {% endwith %}

    <h1 class="mb-4">Magic Admin Powers:</h1>

    <form method="POST" id="regenerateOutput">
        <h3>Regenerate Generic Output:</h3>
        <input type="submit" id="regenerateBtn" name="regenerateBtn" value="Regenerate">
    </form>
    <br/>
    <form method="POST" id="deleteGeneratedFilesForm">
        <h3>Delete Generated files:</h3>
        <input type="submit" id="deleteGeneratedFilesBtn" name="deleteGeneratedFilesBtn" value="Delete Generic">
    </form>
    <br/>
    <form method="POST" id="deleteCompetitorFilesForm">
        <h3>Delete Competitor files:</h3>
        <input type="submit" id="deleteCompetitorFilesBtn" name="deleteCompetitorFilesBtn" value="Delete">
    </form>

    <form method="POST" action="/admin/set-log-level" class="form-inline my-2">
        <label class="mr-2">Global Log Level:</label>
        <select name="global_log_level" class="form-control mr-2">
            {% for level in ['DEBUG', 'INFO', 'WARNING', 'ERROR', 'CRITICAL'] %}
                <option value="{{ level }}" {% if current_log_levels.global == level %}selected{% endif %}>{{ level }}</option>
            {% endfor %}
        </select>
    
        <label class="mr-2">Console Handler:</label>
        <select name="console_log_level" class="form-control mr-2">
            {% for level in ['DEBUG', 'INFO', 'WARNING', 'ERROR', 'CRITICAL'] %}
                <option value="{{ level }}" {% if current_log_levels.handlers.console == level %}selected{% endif %}>{{ level }}</option>
            {% endfor %}
        </select>
        
        <label class="mr-2">File Handler:</label>
        <select name="file_log_level" class="form-control mr-2">
            {% for level in ['DEBUG', 'INFO', 'WARNING', 'ERROR', 'CRITICAL'] %}
                <option value="{{ level }}" {% if current_log_levels.handlers.file == level %}selected{% endif %}>{{ level }}</option>
            {% endfor %}
        </select>
    
        <button type="submit" class="btn btn-sm btn-primary">Update</button>
    </form>


</div>  
{% endblock %}